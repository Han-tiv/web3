{
  "question": "signal_trader 主流程是否已有 margin_type / multi_asset 模式的环境变量读取与验证？",
  "reason": "在实现逐仓与单币种模式前，需要确认是否已有相关配置入口，以避免重复或冲突。",
  "analysis": "检索 signal_trader.rs 仅读取 SIGNAL_LEVERAGE、SIGNAL_MARGIN、SIGNAL_TRADING_ENABLED，未涉及 SIGNAL_MARGIN_TYPE 或其他模式变量。start_both.sh 等脚本同样只检查保证金、杠杆、止损参数，没有 margin 模式配置。",
  "evidence": [
    {
      "path": "apps/rust-trading-bot/src/bin/signal_trader.rs:287",
      "details": "let leverage: u32 = env::var(\"SIGNAL_LEVERAGE\")?.parse()?;"
    },
    {
      "path": "apps/rust-trading-bot/src/bin/signal_trader.rs:288",
      "details": "let margin: f64 = env::var(\"SIGNAL_MARGIN\")?.parse()?;"
    },
    {
      "path": "apps/rust-trading-bot/src/bin/signal_trader.rs:289",
      "details": "let trading_enabled = env::var(\"SIGNAL_TRADING_ENABLED\")?.parse::<bool>()?;"
    },
    {
      "path": "apps/rust-trading-bot/start_both.sh:27",
      "details": "required_vars 数组不包含 margin type 或 multi asset 变量。"
    }
  ],
  "conclusion": "当前主流程未读取任何 margin 模式变量，需要新增环境变量（如 SIGNAL_MARGIN_TYPE、SIGNAL_MULTI_ASSET_MODE）并在程序入口解析，同时完善校验与默认值。"
}
