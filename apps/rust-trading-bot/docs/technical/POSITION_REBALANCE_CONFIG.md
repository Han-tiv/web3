# ðŸ”„ Position Rebalance Trader - é…ç½®è¯´æ˜Ž

## ðŸ“‹ é…ç½®å‚æ•°åœ¨ç³»ç»Ÿä¸­çš„ä½œç”¨æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å®Œæ•´æµç¨‹ï¼ˆæ¯3åˆ†é’Ÿï¼‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: æ”¶é›†ä¿¡å· + æŒä»“                                      â”‚
â”‚ â€¢ ä»Ž SignalManager èŽ·å–æ–°å¸ç§                                â”‚
â”‚ â€¢ ä»Ž Binance èŽ·å–å½“å‰æŒä»“                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: DeepSeek AI æ‰¹é‡åˆ†æžï¼ˆå¹¶å‘5ä¸ªï¼‰                     â”‚
â”‚ â€¢ èŽ·å–100æ ¹1å°æ—¶Kçº¿                                          â”‚
â”‚ â€¢ è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ï¼ˆBOLLã€RSIã€MACDã€å‡çº¿ï¼‰                      â”‚
â”‚ â€¢ è°ƒç”¨ DeepSeek API                                          â”‚
â”‚                                                              â”‚
â”‚ âœ… AI è¿”å›žå†³ç­–ï¼š                                             â”‚
â”‚   {                                                          â”‚
â”‚     signal: "BUY",        â† åªæ˜¯æ–¹å‘å»ºè®®                     â”‚
â”‚     confidence: "HIGH",   â† ç½®ä¿¡åº¦                          â”‚
â”‚     reason: "çªç ´å…³é”®ä½"  â† ç†ç”±                            â”‚
â”‚   }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: PositionCoordinator ç”Ÿæˆäº¤æ˜“è®¡åˆ’                     â”‚
â”‚                                                              â”‚
â”‚ è¿™é‡Œæ‰ä½¿ç”¨ä½ çš„é…ç½®ï¼                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ leverage = ä»Ž .env è¯»å– TRADE_LEVERAGE               â”‚   â”‚
â”‚ â”‚                                                       â”‚   â”‚
â”‚ â”‚ ç”Ÿæˆ TradeAction:                                    â”‚   â”‚
â”‚ â”‚   action_type: OpenLong                              â”‚   â”‚
â”‚ â”‚   symbol: "BTCUSDT"                                  â”‚   â”‚
â”‚ â”‚   leverage: 12           â† ä½¿ç”¨é…ç½®çš„æ æ†           â”‚   â”‚
â”‚ â”‚   quantity: 0.0          â† æš‚æ—¶ä¸º0ï¼Œæ‰§è¡Œå™¨è®¡ç®—      â”‚   â”‚
â”‚ â”‚   priority: High                                     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: TradeExecutor æ‰§è¡Œäº¤æ˜“                               â”‚
â”‚                                                              â”‚
â”‚ è¿™é‡Œè®¡ç®—å®žé™…æ•°é‡ï¼                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 1. è¯»å–é…ç½®ï¼š                                        â”‚   â”‚
â”‚ â”‚    base_position_usdt = 48.0  (ä»Ž .env)             â”‚   â”‚
â”‚ â”‚    leverage = 12              (ä»Ž TradeAction)      â”‚   â”‚
â”‚ â”‚                                                       â”‚   â”‚
â”‚ â”‚ 2. èŽ·å–å½“å‰ä»·æ ¼ï¼š                                    â”‚   â”‚
â”‚ â”‚    price = 65000 (BTC)                               â”‚   â”‚
â”‚ â”‚                                                       â”‚   â”‚
â”‚ â”‚ 3. è®¡ç®—æ•°é‡ï¼š                                        â”‚   â”‚
â”‚ â”‚    quantity = base_position_usdt / price             â”‚   â”‚
â”‚ â”‚             = 48 / 65000                             â”‚   â”‚
â”‚ â”‚             = 0.000738 BTC                           â”‚   â”‚
â”‚ â”‚                                                       â”‚   â”‚
â”‚ â”‚ 4. è°ƒç”¨ Binance APIï¼š                                â”‚   â”‚
â”‚ â”‚    open_long(                                        â”‚   â”‚
â”‚ â”‚      symbol: "BTCUSDT",                              â”‚   â”‚
â”‚ â”‚      quantity: 0.000738,                             â”‚   â”‚
â”‚ â”‚      leverage: 12,           â† è®¾ç½®æ æ†             â”‚   â”‚
â”‚ â”‚      margin_type: "cross"    â† å…¨ä»“æ¨¡å¼             â”‚   â”‚
â”‚ â”‚    )                                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸŽ¯ å…³é”®ç†è§£

### AI å†³ç­– vs é…ç½®å‚æ•°

```
AI çš„èŒè´£ï¼š
â”œâ”€ åˆ†æžå¸‚åœºï¼ˆKçº¿ã€æŒ‡æ ‡ï¼‰
â”œâ”€ åˆ¤æ–­æ–¹å‘ï¼ˆBUY/SELL/HOLDï¼‰
â”œâ”€ è¯„ä¼°ä¿¡å¿ƒï¼ˆHIGH/MEDIUM/LOWï¼‰
â””â”€ ç»™å‡ºç†ç”±ï¼ˆçªç ´å…³é”®ä½ã€è¶‹åŠ¿åè½¬ç­‰ï¼‰

é…ç½®çš„èŒè´£ï¼š
â”œâ”€ æ‰§è¡Œå¤šå¤§çš„ä»“ä½ (base_position_usdt)
â”œâ”€ ä½¿ç”¨å¤šå°‘æ æ† (leverage)
â”œâ”€ å…¨ä»“è¿˜æ˜¯é€ä»“ (margin_type)
â””â”€ æœ€å¤§ä»“ä½é™åˆ¶ (max_position_usdt)
```

### base_position_usdt çš„å«ä¹‰

**é‡è¦**: è¿™ä¸ªå€¼æ˜¯**åä¹‰ä»·å€¼**ï¼Œä¸æ˜¯ä¿è¯é‡‘ï¼

```
å‡è®¾é…ç½®ï¼š
TRADE_BASE_POSITION_USDT=48.0
TRADE_LEVERAGE=12

å®žé™…å«ä¹‰ï¼š
- åä¹‰ä»·å€¼ï¼š48 USDT
- å®žé™…ä¿è¯é‡‘ï¼š48 / 12 = 4 USDT
- å¦‚æžœ BTC = $65,000
- å¼€ä»“æ•°é‡ï¼š48 / 65000 = 0.000738 BTC
- ä»“ä½ä»·å€¼ï¼š0.000738 Ã— 65000 = 48 USDT
- éœ€è¦ä¿è¯é‡‘ï¼š48 / 12 = 4 USDT
```

## ðŸ’° 19U å…¨ä»“ç­–ç•¥é…ç½®

### æŽ¨èé…ç½®ï¼ˆå†™å…¥ /home/hanins/code/web3/.envï¼‰

```bash
# ======================================
# Position Rebalance Trader é…ç½®
# ======================================

# === äº¤æ˜“å‚æ•°é…ç½® ===
TRADE_LEVERAGE=12
# è¯´æ˜Žï¼š12å€æ æ†ï¼Œçˆ†ä»“è·ç¦»çº¦39%
# é€‚åˆï¼šæœ‰ä¸€å®šç»éªŒçš„äº¤æ˜“è€…

TRADE_BASE_POSITION_USDT=48.0
# è¯´æ˜Žï¼šæ¯æ¬¡å¼€ä»“çš„åä¹‰ä»·å€¼48 USDT
# å®žé™…ä¿è¯é‡‘ = 48 / 12 = 4 USDT
# å 19Uæ€»èµ„é‡‘çš„21%

TRADE_MAX_POSITION_USDT=120.0
# è¯´æ˜Žï¼šå•ä¸ªå¸ç§æœ€å¤§åä¹‰ä»·å€¼120 USDT
# å®žé™…æœ€å¤§ä¿è¯é‡‘ = 120 / 12 = 10 USDT
# ç”¨äºŽåŠ ä»“æ—¶çš„é™åˆ¶

TRADE_MIN_API_INTERVAL_MS=500
# è¯´æ˜Žï¼šAPIè°ƒç”¨æœ€å°é—´éš”ï¼Œé¿å…è§¦å‘é™åˆ¶

TRADE_MARGIN_TYPE=cross
# è¯´æ˜Žï¼šcross=å…¨ä»“ï¼ˆæ‰€æœ‰ä»“ä½å…±äº«ä¿è¯é‡‘ï¼‰
#       isolated=é€ä»“ï¼ˆæ¯ä¸ªä»“ä½ç‹¬ç«‹ä¿è¯é‡‘ï¼‰

TRADE_DUAL_SIDE=false
# è¯´æ˜Žï¼šfalse=å•å‘æŒä»“ï¼ˆåªèƒ½åšå¤šæˆ–åšç©ºï¼‰
#       true=åŒå‘æŒä»“ï¼ˆå¯åŒæ—¶åšå¤šåšç©ºï¼‰

# === ä»“ä½åè°ƒé…ç½® ===
POSITION_COOLDOWN_SECS=300
# è¯´æ˜Žï¼š5åˆ†é’Ÿå†·å´æœŸï¼Œé˜²æ­¢é¢‘ç¹è°ƒæ•´åŒä¸€å¸ç§

POSITION_MAX_ADJUSTMENTS=2
# è¯´æ˜Žï¼šå•ä¸ª3åˆ†é’Ÿå‘¨æœŸå†…ï¼Œæœ€å¤šè°ƒæ•´2ä¸ªå¸ç§

# === AI å†³ç­–é…ç½® ===
AI_MAX_CONCURRENCY=5
# è¯´æ˜Žï¼šæœ€å¤šåŒæ—¶åˆ†æž5ä¸ªå¸ç§ï¼ˆå¹¶å‘ï¼‰

AI_CALL_TIMEOUT_SECS=10
# è¯´æ˜Žï¼šå•æ¬¡AIè°ƒç”¨è¶…æ—¶æ—¶é—´

# === å®šæ—¶è¯„ä¼°é…ç½® ===
REBALANCE_INTERVAL_SECS=180
# è¯´æ˜Žï¼šæ¯3åˆ†é’Ÿè§¦å‘ä¸€æ¬¡è¯„ä¼°

SIGNAL_WINDOW_SECS=180
# è¯´æ˜Žï¼šæ”¶é›†æœ€è¿‘3åˆ†é’Ÿçš„ä¿¡å·

SIGNAL_TTL_SECS=600
# è¯´æ˜Žï¼šä¿¡å·10åˆ†é’ŸåŽè¿‡æœŸ
```

## ðŸ“Š ä¸åŒæ æ†é…ç½®å¯¹æ¯”

### ä¿å®ˆç­–ç•¥ï¼ˆ8å€æ æ†ï¼‰

```bash
TRADE_LEVERAGE=8
TRADE_BASE_POSITION_USDT=40.0    # åä¹‰40U = ä¿è¯é‡‘5U
# æ¯æ¬¡ï¼š5Uä¿è¯é‡‘ï¼Œæœ€å¤š3ä¸ªå¸ç§ï¼Œå‰©ä½™4Uç¼“å†²
# çˆ†ä»“è·ç¦»ï¼šçº¦47.5%
```

### å¹³è¡¡ç­–ç•¥ï¼ˆ12å€æ æ†ï¼‰â­ æŽ¨è

```bash
TRADE_LEVERAGE=12
TRADE_BASE_POSITION_USDT=48.0    # åä¹‰48U = ä¿è¯é‡‘4U
# æ¯æ¬¡ï¼š4Uä¿è¯é‡‘ï¼Œæœ€å¤š4ä¸ªå¸ç§ï¼Œå‰©ä½™3Uç¼“å†²
# çˆ†ä»“è·ç¦»ï¼šçº¦39.6%
```

### æ¿€è¿›ç­–ç•¥ï¼ˆ15å€æ æ†ï¼‰

```bash
TRADE_LEVERAGE=15
TRADE_BASE_POSITION_USDT=75.0    # åä¹‰75U = ä¿è¯é‡‘5U
# æ¯æ¬¡ï¼š5Uä¿è¯é‡‘ï¼Œæœ€å¤š3ä¸ªå¸ç§ï¼Œå‰©ä½™4Uç¼“å†²
# çˆ†ä»“è·ç¦»ï¼šçº¦25.3%
```

### æžé™ç­–ç•¥ï¼ˆ20å€æ æ†ï¼‰âš ï¸ å±é™©

```bash
TRADE_LEVERAGE=20
TRADE_BASE_POSITION_USDT=100.0   # åä¹‰100U = ä¿è¯é‡‘5U
# æ¯æ¬¡ï¼š5Uä¿è¯é‡‘ï¼Œæœ€å¤š3ä¸ªå¸ç§ï¼Œå‰©ä½™4Uç¼“å†²
# çˆ†ä»“è·ç¦»ï¼šçº¦19%
```

## ðŸŽ² å®žé™…è¿è¡Œç¤ºä¾‹

### åœºæ™¯ï¼šAI åˆ†æž 3 ä¸ªå¸ç§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é…ç½®ï¼š12å€æ æ†ï¼Œ48Uåä¹‰ä»·å€¼ï¼ˆ4Uä¿è¯é‡‘ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AI å†³ç­–ç»“æžœï¼š
â”œâ”€ BTCUSDT: BUY (HIGH) - "çªç ´å…³é”®ä½"
â”œâ”€ ETHUSDT: HOLD (MEDIUM) - "è¶‹åŠ¿å»¶ç»­"
â””â”€ SOLUSDT: BUY (HIGH) - "ä¸»åŠ›æµå…¥"

PositionCoordinator ç”Ÿæˆè®¡åˆ’ï¼š
â”œâ”€ OpenLong BTCUSDT (leverage=12, quantity=0)
â””â”€ OpenLong SOLUSDT (leverage=12, quantity=0)

TradeExecutor æ‰§è¡Œï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [1/2] BTCUSDT                                           â”‚
â”‚ â€¢ å½“å‰ä»·æ ¼ï¼š$65,000                                     â”‚
â”‚ â€¢ åä¹‰ä»·å€¼ï¼š48 USDT                                     â”‚
â”‚ â€¢ è®¡ç®—æ•°é‡ï¼š48 / 65000 = 0.000738 BTC                  â”‚
â”‚ â€¢ è®¾ç½®æ æ†ï¼š12x                                         â”‚
â”‚ â€¢ éœ€è¦ä¿è¯é‡‘ï¼š4 USDT                                    â”‚
â”‚ âœ… æ‰§è¡ŒæˆåŠŸ                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [2/2] SOLUSDT                                           â”‚
â”‚ â€¢ å½“å‰ä»·æ ¼ï¼š$142.5                                      â”‚
â”‚ â€¢ åä¹‰ä»·å€¼ï¼š48 USDT                                     â”‚
â”‚ â€¢ è®¡ç®—æ•°é‡ï¼š48 / 142.5 = 0.3368 SOL                    â”‚
â”‚ â€¢ è®¾ç½®æ æ†ï¼š12x                                         â”‚
â”‚ â€¢ éœ€è¦ä¿è¯é‡‘ï¼š4 USDT                                    â”‚
â”‚ âœ… æ‰§è¡ŒæˆåŠŸ                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

èµ„é‡‘ä½¿ç”¨æƒ…å†µï¼š
â”œâ”€ å·²ç”¨ä¿è¯é‡‘ï¼š8 USDT (42%)
â”œâ”€ å‰©ä½™å¯ç”¨ï¼š11 USDT (58%)
â””â”€ æ€»åä¹‰ä»·å€¼ï¼š96 USDT
```

## âš™ï¸ å¦‚ä½•è°ƒæ•´é…ç½®

### æ–¹æ³•1ï¼šç›´æŽ¥ç¼–è¾‘ .envï¼ˆæŽ¨èï¼‰

```bash
# ç¼–è¾‘ä¸»é…ç½®æ–‡ä»¶
nano /home/hanins/code/web3/.env

# æ‰¾åˆ°å¹¶ä¿®æ”¹è¿™å‡ è¡Œï¼š
TRADE_LEVERAGE=12                 # æ”¹ä¸ºä½ æƒ³è¦çš„æ æ†
TRADE_BASE_POSITION_USDT=48.0    # æ”¹ä¸ºä½ æƒ³è¦çš„åä¹‰ä»·å€¼
TRADE_MARGIN_TYPE=cross          # ä¿æŒå…¨ä»“

# ä¿å­˜åŽé‡å¯ç¨‹åº
./scripts/run_rebalance_trader.sh
```

### æ–¹æ³•2ï¼šè®¡ç®—å™¨è¾…åŠ©

```
ç›®æ ‡ï¼šæ¯æ¬¡ä½¿ç”¨ X USDT ä¿è¯é‡‘ï¼ŒY å€æ æ†

è®¡ç®—å…¬å¼ï¼š
TRADE_BASE_POSITION_USDT = X Ã— Y

ç¤ºä¾‹ï¼š
- æƒ³æ¯æ¬¡ç”¨ 4U ä¿è¯é‡‘ï¼Œ10å€æ æ†
  â†’ TRADE_BASE_POSITION_USDT = 4 Ã— 10 = 40.0
  â†’ TRADE_LEVERAGE = 10

- æƒ³æ¯æ¬¡ç”¨ 5U ä¿è¯é‡‘ï¼Œ15å€æ æ†
  â†’ TRADE_BASE_POSITION_USDT = 5 Ã— 15 = 75.0
  â†’ TRADE_LEVERAGE = 15
```

### æ–¹æ³•3ï¼šå¿«é€Ÿåˆ‡æ¢é¢„è®¾

```bash
# è¿›å…¥é…ç½®ç›®å½•
cd /home/hanins/code/web3

# å¤‡ä»½å½“å‰é…ç½®
cp .env .env.backup

# æ·»åŠ æƒ³è¦çš„é…ç½®ï¼ˆè¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼‰
cat >> .env << 'EOF'

# === Position Rebalance é…ç½® ===
TRADE_LEVERAGE=12
TRADE_BASE_POSITION_USDT=48.0
TRADE_MAX_POSITION_USDT=120.0
TRADE_MARGIN_TYPE=cross
TRADE_DUAL_SIDE=false
POSITION_COOLDOWN_SECS=300
POSITION_MAX_ADJUSTMENTS=2
EOF

# æ£€æŸ¥é…ç½®
grep "TRADE_" .env
```

## ðŸ“ˆ é…ç½®æ•ˆæžœå¯¹æ¯”è¡¨

| é…ç½® | ä¿è¯é‡‘/æ¬¡ | æ æ† | åä¹‰ä»·å€¼ | æœ€å¤šå¸ç§ | çˆ†ä»“è·ç¦» | æœˆæ”¶ç›Šç›®æ ‡ |
|------|-----------|------|----------|----------|----------|------------|
| ä¿å®ˆ | 5U | 8x | 40U | 3ä¸ª | 47.5% | 20-40% |
| **æŽ¨è** | **4U** | **12x** | **48U** | **4ä¸ª** | **39.6%** | **40-80%** |
| æ¿€è¿› | 5U | 15x | 75U | 3ä¸ª | 25.3% | 80-150% |
| å±é™© | 5U | 20x | 100U | 3ä¸ª | 19% | 150%+ |

## âš ï¸ é‡è¦æç¤º

1. **base_position_usdt æ˜¯åä¹‰ä»·å€¼ï¼Œä¸æ˜¯ä¿è¯é‡‘**
   ```
   å®žé™…ä¿è¯é‡‘ = base_position_usdt / leverage
   ```

2. **AI åªè´Ÿè´£åˆ¤æ–­æ–¹å‘å’Œä¿¡å¿ƒ**
   - AI ä¸çŸ¥é“ä½ çš„æ æ†å’Œä»“ä½å¤§å°
   - AI åªè¯´"BUY"æˆ–"SELL"
   - å…·ä½“å¼€å¤šå¤§ä»“ä½ç”±é…ç½®å†³å®š

3. **å…¨ä»“æ¨¡å¼çš„é£Žé™©**
   - æ‰€æœ‰ä»“ä½å…±äº«19Uä¿è¯é‡‘
   - ä¸€ä¸ªå¸ç§å¤§å¹…äºæŸä¼šå½±å“å…¶ä»–æŒä»“
   - å½“æ€»ä¿è¯é‡‘ä¸è¶³æ—¶å…¨éƒ¨å¼ºå¹³

4. **å»ºè®®å…ˆæµ‹è¯•**
   ```bash
   # å…ˆåœ¨æµ‹è¯•ç½‘è¿è¡Œ
   BINANCE_TESTNET=true
   
   # è§‚å¯Ÿ1-2å‘¨åŽå†ä¸Šå®žç›˜
   ```

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿå®Œæ•´æŒ‡å—](REBALANCE_TRADER_GUIDE.md)
- [æµç¨‹å›¾è¯´æ˜Ž](REBALANCE_FLOW_CHART.md)
- [å¯åŠ¨è„šæœ¬](scripts/run_rebalance_trader.sh)

---

**æœ€ç»ˆå»ºè®®**ï¼šä»Ž12å€æ æ†ã€48Uåä¹‰ä»·å€¼ï¼ˆ4Uä¿è¯é‡‘ï¼‰å¼€å§‹ï¼Œè§‚å¯Ÿå‡ å¤©æ•ˆæžœåŽå†è°ƒæ•´ã€‚
