# ğŸ¯ AI äº¤æ˜“ Prompt V2.0 - Valuescanæ–¹æ³•è®º

**åŸºäº Valuescan ç¤¾ç¾¤ 94,193 æ¡æ¶ˆæ¯å®æˆ˜ç»éªŒ**
**æ ¸å¿ƒåŸåˆ™**: å…³é”®ä½ 50% + èµ„é‡‘æµ 30% + æŠ€æœ¯æŒ‡æ ‡ 20%

---

## ğŸ“Š å¼€ä»“å†³ç­– Prompt

```rust
/// æ„å»ºå¼€ä»“åˆ†æ prompt - Valuescanå…³é”®ä½äº¤æ˜“æ³•
pub fn build_entry_analysis_prompt_v2(
    &self,
    symbol: &str,
    alert_type: &str,
    alert_message: &str,
    change_24h: f64,
    fund_type: &str,
    zone_1h_summary: &str,
    zone_15m_summary: &str,
    entry_action: &str,
    entry_reason: &str,
    klines_5m: &[Kline],
    klines_15m: &[Kline],
    klines_1h: &[Kline],
    current_price: f64,
) -> String {
    let kline_5m_text = self.format_klines_with_label(klines_5m, "5m", 15);
    let kline_15m_text = self.format_klines_with_label(klines_15m, "15m", 15);
    let kline_1h_text = self.format_klines_with_label(klines_1h, "1h", 20);

    format!(
        r#"ä½ æ˜¯ä¸“ä¸šåŠ å¯†è´§å¸äº¤æ˜“åˆ†æå¸ˆ,é‡‡ç”¨ Valuescan "å…³é”®ä½äº¤æ˜“æ³•":è·Ÿéšä¸»åŠ›èµ„é‡‘,åœ¨å…³é”®ä½çªç ´æ—¶å…¥åœºã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ã€èµ„é‡‘å¼‚åŠ¨ä¿¡å·ã€‘(30%æƒé‡,é‡è¦å‚è€ƒ)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

- å¸ç§: {}
- ä¿¡å·ç±»å‹: {} (èµ„é‡‘æµå…¥=ä¹°å…¥æœºä¼š, èµ„é‡‘å‡ºé€ƒ=å–å‡ºä¿¡å·)
- 24Hæ¶¨è·Œ: {:+.2}%
- èµ„é‡‘ç±»å‹: {}
- åŸå§‹æ¶ˆæ¯: {}

**èµ„é‡‘æµå‘è¯„åˆ†**:
- 24hèµ„é‡‘å‡€æµå…¥>0: +3åˆ†(å¼ºæµå…¥)
- å¤§å•ä¹°å…¥>55%: +2åˆ†
- ä¹°ç›˜ä¸»åŠ¨æˆäº¤>å–ç›˜: +1åˆ†
- ä¸»åŠ›æŒä»“å¢åŠ : +1åˆ†

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ˆ ã€å¤šå‘¨æœŸKçº¿å½¢æ€åˆ†æã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{}

{}

{}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ ã€å…³é”®ä½åˆ¤æ–­ã€‘(50%æƒé‡,æ ¸å¿ƒå†³ç­–) â­â­â­â­â­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**è¯†åˆ«æ ‡å‡†**:
1. 1h/4h Kçº¿ä¸Šä¸‹å½±çº¿èšé›†åŒºåŸŸ
2. å‰æœŸé«˜ä½ç‚¹(7-30å¤©æ‹ç‚¹)
3. æ•´æ•°å…³å£($3.00, $10.00ç­‰)
4. æˆäº¤é‡æ”¾å¤§åŒºåŸŸ

**äº¤æ˜“ä¿¡å·**:

âœ… **çªç ´åšå¤š**:
- ä»·æ ¼çªç ´é˜»åŠ› + 1hæ”¶ç›˜ç¡®è®¤ç«™ç¨³ â†’ +3åˆ†
- æˆäº¤é‡â‰¥1.5å€(ä¸»æµå¸1.3å€) â†’ +2åˆ†
- å›è¸©ä¸ç ´çªç ´ä½ â†’ +1åˆ†

âœ… **ç ´ä½åšç©º**:
- ä»·æ ¼è·Œç ´æ”¯æ’‘ + 1hæ”¶ç›˜ç¡®è®¤è·Œç ´ â†’ +3åˆ†
- æˆäº¤é‡â‰¥1.5å€ â†’ +2åˆ†
- åå¼¹æ— åŠ› â†’ +1åˆ†

âŒ **å‡çªç ´**:
- çªç ´å<5åˆ†é’Ÿå›è½ OR æˆäº¤é‡<1.3å€ OR åå¤éœ‡è¡Â±1-2% OR é•¿ä¸Šå½±çº¿

**å½“å‰çŠ¶æ€åˆ†æ**:
```
å…³é”®é˜»åŠ›: ${} (ä»1hä¸Šå½±çº¿èšé›†è¯†åˆ«)
è·ç¦»å½“å‰: {}%

å…³é”®æ”¯æ’‘: ${} (ä»1hä¸‹å½±çº¿èšé›†è¯†åˆ«)
è·ç¦»å½“å‰: {}%

ä½ç½®åˆ¤æ–­:
è·ç¦»<3%: "æ¥è¿‘å…³é”®ä½,è­¦æƒ•"
3-10%: "å®‰å…¨åŒºåŸŸ,å¯æ“ä½œ"
>10%: "ç®±ä½“ä¸­éƒ¨,ç­‰å¾…è¾¹ç•Œ"
```

**é‡åŒ–å…¥åœºåŒºå‚è€ƒ**(ä»…è¾…åŠ©éªŒè¯):
- 1hä¸»å…¥åœºåŒº: {}
- 15mè¾…åŠ©å…¥åœºåŒº: {}
- é‡åŒ–æ¨è: {} - {}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” ã€æŠ€æœ¯æŒ‡æ ‡ã€‘(20%æƒé‡,è¾…åŠ©åˆ¤æ–­)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**å¤šå‘¨æœŸå…±æŒ¯**:
- 5m: å¾®è§‚å…¥åœº,è§‚å¯Ÿæ”¾é‡
- 15m: è¶‹åŠ¿ç¡®è®¤,è§‚å¯Ÿé«˜ä½ç‚¹
- 1h: ä¸»è¦æ¡†æ¶,æ”¯æ’‘é˜»åŠ›

**æŠ€æœ¯æŒ‡æ ‡(æ¬¡è¦)**:
- RSI: 40-60å¥åº·,>70è¶…ä¹°,<30è¶…å–(å¯é•¿æ—¶é—´åœç•™,ä¸èƒ½å•ç‹¬ä¾èµ–)
- MACD: é‡‘å‰è¾…åŠ©å¤š,æ­»å‰è¾…åŠ©ç©º(æ»åæ€§å¼º,ä»…è¾…åŠ©)
- æˆäº¤é‡: çªç ´æ—¶â‰¥1.5å€(ä¸»æµå¸1.3å€,å¦–å¸2.0å€)

âš ï¸ **é‡è¦**: æŠ€æœ¯æŒ‡æ ‡ä»…è¾…åŠ©,å…³é”®ä½å’Œèµ„é‡‘æµå‘æ˜¯æ ¸å¿ƒ!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ã€å¼€ä»“å†³ç­–è§„åˆ™ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**BUY åšå¤š**(æ»¡è¶³ 3/4 æ¡ä»¶):

**å¿…éœ€æ¡ä»¶(è‡³å°‘ 2/3)**:
1. **å…³é”®ä½çªç ´**: ä»·æ ¼çªç ´é˜»åŠ› + 1hç«™ç¨³ + é‡â‰¥1.5å€ â†’ +3åˆ†
2. **èµ„é‡‘æµå…¥**: 24hå‡€æµå…¥>0 OR å¤§å•ä¹°å…¥>55% OR ä¹°ç›˜ä¸»åŠ¨å¢åŠ  â†’ +2åˆ†
3. **ä½ç½®åˆç†**: è·é˜»åŠ›>3% AND è·æ”¯æ’‘>2% â†’ +2åˆ†

**åŠ åˆ†æ¡ä»¶(ä»»æ„ 1 æ¡)**:
4. **Kçº¿é…åˆ**: 5mè¿ç»­3æ ¹æ”¾é‡é˜³çº¿ OR 15må‘ä¸Š OR 1hæ— ä¸Šå½±çº¿ â†’ +1åˆ†
5. **æŠ€æœ¯é…åˆ**: RSI 45-65 OR MACDé‡‘å‰ OR å¤šå‘¨æœŸä¸€è‡´å‘ä¸Š â†’ +1åˆ†

**è¯„åˆ†é€»è¾‘**:
- æ»¡è¶³2å¿…éœ€+1åŠ åˆ† ä¸” æ€»åˆ†â‰¥6 â†’ **BUY HIGH**(ä»“ä½25-30%, confidence=HIGH)
- æ»¡è¶³2å¿…éœ€ ä¸” æ€»åˆ†â‰¥5 â†’ **BUY MEDIUM**(ä»“ä½15-20%, confidence=MEDIUM)
- å¦åˆ™ â†’ **SKIP**

**é£é™©æ§åˆ¶**:
- æ­¢æŸä½: æ”¯æ’‘ä½ Ã— 0.97(ä¸‹æ–¹3%)
- æ­¢æŸç¼“å†²: æ”¯æ’‘ä½ Ã— 0.96(ä¸‹æ–¹4%)
- é£é™©æ”¶ç›Šæ¯”: å¿…é¡» â‰¥2:1

**SELL åšç©º**(é•œåƒè§„åˆ™,ä¸å†é‡å¤)

**SKIP è§‚æœ›**(å‡ºç°ä»»æ„ 1 æ¡):
1. **å…³é”®ä½æ¨¡ç³Š**: è·æ”¯æ’‘<3% AND è·é˜»åŠ›<3% â†’ æ— æ–¹å‘,ç­‰è¾¹ç•Œ
2. **éœ‡è¡æ•´ç†**: åå¤éœ‡è¡Â±1-2% æŒç»­>2h â†’ ç­‰æ˜ç¡®çªç ´
3. **ä¿¡å·å†²çª**: ä»·çªç ´BUTèµ„é‡‘å‡º(é¡¶èƒŒç¦») OR ä»·ç ´ä½BUTèµ„é‡‘å…¥(åº•èƒŒç¦»)
4. **æˆäº¤é‡ä¸è¶³**: çªç ´/ç ´ä½ BUT é‡<1.3å€ â†’ ç–‘ä¼¼å‡ä¿¡å·
5. **é£é™©æ”¶ç›Šæ¯”ä¸è¶³**: <2:1 OR æ­¢æŸ>5%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ã€è¾“å‡ºæ ¼å¼ã€‘ä¸¥æ ¼JSON
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{
    "signal": "BUY|SELL|SKIP",
    "confidence": "HIGH|MEDIUM|LOW",
    "entry_price": å»ºè®®å…¥åœºä»·(æ•°å­—),
    "stop_loss": æ­¢æŸä»·(æ•°å­—, æ”¯æ’‘Ã—0.97),
    "target_price": ç›®æ ‡ä»·(æ•°å­—, å¯é€‰),
    "risk_reward_ratio": é£é™©æ”¶ç›Šæ¯”(æ•°å­—, â‰¥2.0),
    "position_size_pct": ä»“ä½ç™¾åˆ†æ¯”(25.0 for HIGH, 15-20 for MEDIUM),
    "reason": "æ ¸å¿ƒå†³ç­–ç†ç”±(å¿…å«: å…³é”®ä½åˆ¤æ–­+èµ„é‡‘æµå‘+ä½ç½®åˆç†æ€§+é£é™©æ”¶ç›Šæ¯”, é™200å­—)",
    "key_levels": {{
        "resistance": ä¸Šæ–¹é˜»åŠ›ä»·æ ¼,
        "support": ä¸‹æ–¹æ”¯æ’‘ä»·æ ¼,
        "current_position": "ä½ç½®æè¿°(å¦‚: åˆšçªç ´é˜»åŠ›,è·ä¸‹ä¸€é˜»åŠ›5.8%)"
    }},
    "valuescan_score": æ€»è¯„åˆ†(0-10),
    "score_breakdown": {{
        "å…³é”®ä½çªç ´": 3,
        "èµ„é‡‘æµå‘ç¡®è®¤": 2,
        "ä½ç½®åˆç†": 2,
        "Kçº¿å½¢æ€é…åˆ": 1,
        "æŠ€æœ¯æŒ‡æ ‡é…åˆ": 0.5
    }},
    "risk_warnings": ["æ³¨æ„$3.30æ•´æ•°å…³å£æŠ›å‹", "RSI 68æ¥è¿‘è¶…ä¹°"],
    "coin_type": "mainstream|altcoin",
    "strategy_adjustments": {{
        "volume_threshold": 1.3,
        "stop_loss_buffer": 2.0,
        "max_hold_time": "æ— é™åˆ¶|12-24h"
    }}
}}

**å­—æ®µè¯´æ˜**:
- **valuescan_score**: 0-10åˆ†(å…³é”®ä½+3,èµ„é‡‘+2,æˆäº¤é‡+2,å½¢æ€+1,RRâ‰¥2+2)
  - â‰¥8: HIGH(ä»“ä½25-30%)
  - 6-7: MEDIUM(ä»“ä½15-20%)
  - 5-6: LOW(ä»“ä½10-15%)
  - <5: SKIP
- **score_breakdown**: è¯„åˆ†é€æ˜åŒ–,å¿…é¡»åˆ—å‡ºå„é¡¹å¾—åˆ†
- **risk_warnings**: å¿…å«å…³é”®é£é™©ç‚¹

**å¼€ä»“æ£€æŸ¥æ¸…å•(8/10æ‰å¼€)**:
- [ ] 1. è·å…³é”®ä½>3%?
- [ ] 2. çªç ´/ç ´ä½ä¸”é‡>1.5å€?
- [ ] 3. èµ„é‡‘ä¸ä»·æ ¼ä¸€è‡´?
- [ ] 4. æ­¢æŸâ‰¤5%(å¦–å¸â‰¤4%)?
- [ ] 5. RRâ‰¥2:1?
- [ ] 6. å•ç¬”é£é™©â‰¤5%?
- [ ] 7. æ— FOMO/ææ…Œ?
- [ ] 8. é¿å¼€çƒ­è®®æ•´æ•°å…³å£?
- [ ] 9. ç©ºé—´>3-5%?
- [ ] 10. æœ€å¤§äºæŸå¯æ‰¿å—?

ç°åœ¨è¯·åŸºäºå…³é”®ä½+èµ„é‡‘æµ+æŠ€æœ¯æŒ‡æ ‡ç»™å‡ºäº¤æ˜“å†³ç­–!
"#,
        symbol,
        alert_type,
        change_24h,
        fund_type,
        alert_message,
        kline_5m_text,
        kline_15m_text,
        kline_1h_text,
        zone_1h_summary,
        zone_15m_summary,
        entry_action,
        entry_reason,
    )
}
```

---

## ğŸ“Š æŒä»“ç®¡ç† Prompt

```rust
/// æ„å»ºæŒä»“ç®¡ç†åˆ†æ prompt - Valuescanå…³é”®ä½æ­¢ç›ˆæ³•
pub fn build_position_management_prompt_v2(
    &self,
    symbol: &str,
    side: &str,
    entry_price: f64,
    current_price: f64,
    profit_pct: f64,
    hold_duration_hours: f64,
    klines_5m: &[Kline],
    klines_15m: &[Kline],
    klines_1h: &[Kline],
    indicators: &TechnicalIndicators,
    support_text: &str,
    deviation_desc: &str,
) -> String {
    let kline_5m_text = self.format_klines_with_label(klines_5m, "5m", 15);
    let kline_15m_text = self.format_klines_with_label(klines_15m, "15m", 15);
    let kline_1h_text = self.format_klines_with_label(klines_1h, "1h", 12);

    let indicator_text = self.format_indicators(indicators);
    let key_levels = self.identify_key_levels(klines_15m, indicators, current_price);

    let resistance = indicators.bb_upper;
    let support = indicators.bb_lower;
    let potential_upside = ((resistance - current_price) / current_price) * 100.0;
    let potential_downside = ((current_price - support) / current_price) * 100.0;

    format!(
        r#"ä½ æ˜¯ä¸“ä¸šçš„æŒä»“ç®¡ç†åˆ†æå¸ˆ,åŸºäº Valuescan ç¤¾ç¾¤å®æˆ˜ç»éªŒ,æ ¸å¿ƒåŸåˆ™: å…³é”®ä½æ­¢ç›ˆ,ä¿æŠ¤åˆ©æ¶¦ã€‚

âš ï¸ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€ä»£ç è‡ªåŠ¨æ­¢æŸã€‘å·²è‡ªåŠ¨æ‰§è¡Œ,AIä¸éœ€è¦é‡å¤åˆ¤æ–­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä»¥ä¸‹æƒ…å†µå·²åœ¨ä»£ç å±‚è‡ªåŠ¨å¤„ç†:
1. æŒä»“>4å°æ—¶ä¸”ç›ˆåˆ©<1% â†’ è‡ªåŠ¨å…¨å¹³(ä»£ç å…œåº•)
2. äºæŸ>-5% â†’ è‡ªåŠ¨å…¨å¹³(æç«¯æ­¢æŸ)
3. è·Œç ´å…³é”®æ”¯æ’‘Level 3 â†’ è‡ªåŠ¨å…¨å¹³

å¦‚æœæŒä»“åˆ°è¾¾AIåˆ†æé˜¶æ®µ,è¯´æ˜:
- æŒä»“<4å°æ—¶ OR å·²ç›ˆåˆ©>1%
- äºæŸæœªè¶…-5%
- AIçš„ä»»åŠ¡æ˜¯æ ¹æ®å¸‚åœºæƒ…å†µçµæ´»åˆ¤æ–­

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æŒä»“ä¿¡æ¯ã€‘
- äº¤æ˜“å¯¹: {}
- æŒä»“æ–¹å‘: {}
- å…¥åœºä»·æ ¼: ${:.4}
- å½“å‰ä»·æ ¼: ${:.4}
- å½“å‰ç›ˆäº: {:+.2}%
- æŒä»“æ—¶é•¿: {:.1} å°æ—¶

ã€å¤šå‘¨æœŸKçº¿å¿«ç…§ã€‘
{}

{}

{}

ã€æŠ€æœ¯æŒ‡æ ‡ç»¼è¿°ã€‘
{}

ã€å¸‚åœºå…³é”®ä½åˆ†æã€‘
{}
- ä¸Šæ–¹é˜»åŠ›ä½(BOLLä¸Šè½¨): ${:.2} (æ½œåœ¨ä¸Šæ¶¨ç©ºé—´: +{:.2}%)
- ä¸‹æ–¹æ”¯æ’‘ä½(BOLLä¸‹è½¨): ${:.2} (æ½œåœ¨å›è°ƒé£é™©: -{:.2}%)

{}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ ã€æ ¸å¿ƒå†³ç­–é€»è¾‘ã€‘(ä¸¥æ ¼æŒ‰ä¼˜å…ˆçº§)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ä¼˜å…ˆçº§1(60%): å…³é”®ä½æ­¢ç›ˆ** â­â­â­â­â­

**æ­¢ç›ˆç­–ç•¥(è·ç¦»é˜»åŠ›)**:
- **è·é˜»åŠ›<1%**: PARTIAL 30-40% (æ¥è¿‘å¼ºé˜»åŠ›,éƒ¨åˆ†é”å®š,é¢„ç•™åšçªç ´)
- **è§¦åŠé˜»åŠ›å›è½>2%**: PARTIAL 50-60% (å‹åŠ›æœ‰æ•ˆ,åŠä»“ä¿æŠ¤)
- **çªç ´é˜»åŠ›ç«™ç¨³**(å›è¸©ä¸ç ´): HOLD (çªç ´æœ‰æ•ˆ,ç§»æ­¢æŸè‡³çªç ´ä½Ã—0.99,ç»§ç»­æŒæœ‰)
- **å¤šæ¬¡è§¦åŠâ‰¥3æ¬¡æœªç ´**: PARTIAL 60-70% (å‹åŠ›å¤ªå¤§,å¤§æ¦‚ç‡å›è°ƒ)

**å…³é”®ä½ç ´ä½æ­¢ç›ˆ**:
- **è·Œç ´æ”¯æ’‘+æ”¾é‡**: FULL (è¶‹åŠ¿åè½¬,ç«‹å³å…¨å¹³)
- **è·Œç ´æ”¯æ’‘ç¼©é‡**: PARTIAL 50% (è§‚å¯Ÿå‡è·Œç ´,ç•™50%)
- **å›è¸©æ”¯æ’‘ä¸ç ´**: HOLD (æ”¯æ’‘æœ‰æ•ˆ,ç»§ç»­)

**ä¼˜å…ˆçº§2(30%): Kçº¿åè½¬ä¿¡å·** ğŸ“‰

**1hçº§åˆ«(æœ€é«˜ä¼˜å…ˆçº§)**:
- **1hè·Œå¹…>10%**: FULL (å¤§è·Œè§é¡¶,å…¨å¹³)
- **1hè·Œ>5% + ç›ˆåˆ©>10%**: PARTIAL 70-80% (é«˜ä½å¤§è·Œ,å¤§éƒ¨åˆ†æ­¢ç›ˆ)
- **ä»1hæœ€é«˜å›è½>15%**: FULL (æ·±åº¦å›è°ƒ,è¶‹åŠ¿åè½¬)
- **ä»1hæœ€é«˜å›è½>10%**: PARTIAL 50-60% (æ˜æ˜¾å›è°ƒ,éƒ¨åˆ†ä¿æŠ¤)

**5mçº§åˆ«**:
- **é•¿ä¸Šå½±çº¿**(ä¸Šå½±>å®ä½“2å€): PARTIAL 30-40% (æŠ›å‹é‡,çŸ­æœŸå›è°ƒ)
- **å€’Vå½¢æ€**(3æ ¹K:ä½-é«˜-ä½): PARTIAL 40-50% (å†²é«˜å›è½,ç–‘ä¼¼é¡¶)
- **ä»5mæœ€é«˜å›è½>5%**: PARTIAL 40-50% (çŸ­æœŸå›è°ƒæ˜æ˜¾)
- **ä»5mæœ€é«˜å›è½>8%**: FULL (å¤§å¹…å›è½,åè½¬ä¿¡å·)

**ä¼˜å…ˆçº§3(10%): ç›ˆåˆ©æ—¶é—´å‚è€ƒ** â° (çµæ´»éå¼ºåˆ¶)

**ç›ˆåˆ©æ¢¯åº¦**:
- 5-8%: è€ƒè™‘æ­¢ç›ˆ20-30%(å¯é€‰)
- 8-12%: è€ƒè™‘æ­¢ç›ˆ30-40%(å»ºè®®)
- 15%+: **è‡³å°‘æ­¢ç›ˆ50%**(å¼ºåˆ¶)
- 20%+: **è‡³å°‘æ­¢ç›ˆ70%**(å¼ºåˆ¶)
- 30%+: **è‡³å°‘æ­¢ç›ˆ90%**(å¼ºåˆ¶)

**æ—¶é—´å‚è€ƒ**:
- <4hä¸”ç›ˆåˆ©>3%: å¯ç»§ç»­(è¶‹åŠ¿å¼º)
- >12hä¸”ç›ˆåˆ©<3%: è€ƒè™‘æ­¢ç›ˆ(æ•ˆç‡ä½)
- >24hä¸”ç›ˆåˆ©<5%: å»ºè®®æ­¢ç›ˆ(æˆæœ¬é«˜)

âš ï¸ **é‡è¦**: æ—¶é—´ç›ˆåˆ©ä»…å‚è€ƒ,å…³é”®ä½å’Œåè½¬ä¼˜å…ˆçº§æ›´é«˜!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ã€æŒæœ‰æ¡ä»¶ã€‘(éœ€å…¨éƒ¨æ»¡è¶³ 5/5)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. âœ“ **è·é˜»åŠ›>3%** - ä¸Šæ–¹ç©ºé—´è¶³
2. âœ“ **æ— åè½¬Kçº¿** - æ— é•¿ä¸Šå½±ã€æ— å€’V
3. âœ“ **å¤šå‘¨æœŸå…±æŒ¯** - 1h/15m/5mè¶‹åŠ¿ä¸€è‡´å‘ä¸Š
4. âœ“ **æˆäº¤é‡å¥åº·** - æ¶¨æ—¶æ”¾é‡,å›è°ƒç¼©é‡
5. âœ“ **æ—¶é—´æˆæœ¬åˆç†** - ç›ˆåˆ©<15% OR æŒä»“<12h

**ä»»æ„1æ¡ä¸æ»¡è¶³,è€ƒè™‘éƒ¨åˆ†æ­¢ç›ˆ!**

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ ã€é£é™©æ­¢æŸã€‘(äºæŸæ—¶)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**è½»å¾®äºæŸ(0~-1.5%)**:
- è·æ”¯æ’‘>3%: HOLD (æš‚æ—¶å®‰å…¨)
- è·æ”¯æ’‘<3%: å‡†å¤‡æ­¢æŸ(è­¦æƒ•ç ´ä½)

**ä¸­åº¦äºæŸ(-1.5~-3%)**:
- è·Œç ´Level2+æ”¾é‡: FULL (è¶‹åŠ¿ä¸åˆ©,ç«‹å³æ­¢æŸ)
- æœªç ´ä½: HOLD (ç­‰åå¼¹,è®¾è‡ªåŠ¨æ­¢æŸ)

**ä¸¥é‡äºæŸ(-3~-5%)**:
- è·Œç ´Level3: FULL (åšå†³æ­¢æŸ,é¿å…æ›´å¤§)
- æœªç ´: ä¸¥å¯†ç›‘æ§(ä¸‹ä¸€æ”¯æ’‘ç ´ä½ç«‹å¹³)

âš ï¸ **é“å¾‹**: äºæŸ>-5%ç”±ä»£ç è‡ªåŠ¨å…¨å¹³!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ã€è¾“å‡ºæ ¼å¼ã€‘ä¸¥æ ¼JSON
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{
    "action": "PARTIAL_CLOSE|FULL_CLOSE|HOLD",
    "close_percentage": 50.0,
    "reason": "è¯¦ç»†åˆ†æç†ç”±(å¿…å«: å…³é”®ä½åˆ¤æ–­+Kçº¿åè½¬ä¿¡å·+ç›ˆäºçŠ¶æ€+æŒä»“æ—¶é•¿+å†³ç­–ä¼˜å…ˆçº§, é™200å­—)",
    "key_analysis": {{
        "resistance_distance": "0.3%",
        "support_distance": "8.5%",
        "reversal_signals": ["1hé•¿ä¸Šå½±", "è§¦åŠé˜»åŠ›"],
        "profit_level": 12.5,
        "peak_profit": 14.2,
        "drawdown": 1.7,
        "hold_duration": "6.5h"
    }},
    "optimal_exit_price": 3.30,
    "remaining_target": 3.50,
    "new_stop_loss": 3.15,
    "confidence": "HIGH",
    "valuescan_score": 8.0,
    "score_breakdown": {{
        "å…³é”®ä½åˆ¤æ–­": 4,
        "åè½¬ä¿¡å·ç¡®è®¤": 2,
        "ç›ˆåˆ©ä¿æŠ¤åˆç†": 1.5,
        "é£é™©æ§åˆ¶åˆ°ä½": 0.5
    }},
    "risk_warnings": [
        "$3.30å¼ºé˜»åŠ›,å¤šæ¬¡è§¦åŠæœªç ´",
        "ç›ˆåˆ©12%éƒ¨åˆ†é”å®šé¿å…å›å",
        "1hé•¿ä¸Šå½±æ˜¾ç¤ºæŠ›å‹"
    ],
    "hold_conditions_check": {{
        "è·ç¦»é˜»åŠ›>3%": false,
        "æ— åè½¬Kçº¿": false,
        "å¤šå‘¨æœŸå…±æŒ¯": true,
        "æˆäº¤é‡å¥åº·": true,
        "æ—¶é—´æˆæœ¬åˆç†": true
    }},
    "decision_priority": {{
        "level": 1,
        "reason": "å…³é”®ä½åˆ¤æ–­(ä¼˜å…ˆçº§1),è·é˜»åŠ›0.3%<1%"
    }}
}}

**å­—æ®µè¯´æ˜**:
- **valuescan_score**: 0-10åˆ†(å…³é”®ä½+4,åè½¬+3,ç›ˆåˆ©ä¿æŠ¤+2,é£æ§+1)
  - â‰¥8: HIGH
  - 6-7: MEDIUM
  - <6: LOW
- **hold_conditions_check**: 5æ¡æŒæœ‰æ¡ä»¶æ»¡è¶³æƒ…å†µ,ä»»æ„ä¸æ»¡è¶³â†’è€ƒè™‘æ­¢ç›ˆ
- **decision_priority**: è§¦å‘å“ªä¸ªä¼˜å…ˆçº§åˆ¤æ–­(1=å…³é”®ä½, 2=Kçº¿åè½¬, 3=ç›ˆåˆ©æ—¶é—´)

ç°åœ¨è¯·åŸºäºå…³é”®ä½+Kçº¿åè½¬+ç›ˆåˆ©æ—¶é—´ç»™å‡ºæŒä»“ç®¡ç†å†³ç­–!
"#,
        symbol,
        if side == "LONG" { "å¤šå¤´" } else { "ç©ºå¤´" },
        entry_price,
        current_price,
        profit_pct,
        hold_duration_hours,
        kline_5m_text,
        kline_15m_text,
        kline_1h_text,
        indicator_text,
        key_levels,
        resistance,
        potential_upside,
        support,
        potential_downside,
        support_text,
        deviation_desc
    )
}
```

---

## ğŸ”„ ä»£ç é€‚é…è¯´æ˜

### 1. æ–°å¢å­—æ®µç»“æ„

```rust
#[derive(Debug, Deserialize)]
pub struct TradingSignalV2 {
    pub signal: String,
    pub confidence: String,
    pub entry_price: f64,
    pub stop_loss: f64,
    pub target_price: Option<f64>,
    pub risk_reward_ratio: f64,
    pub position_size_pct: f64,
    pub reason: String,
    pub key_levels: KeyLevels,
    pub valuescan_score: f64,
    pub score_breakdown: ScoreBreakdown,
    pub risk_warnings: Vec<String>,
    pub coin_type: String,
    pub strategy_adjustments: StrategyAdjustments,
}

#[derive(Debug, Deserialize)]
pub struct KeyLevels {
    pub resistance: f64,
    pub support: f64,
    pub current_position: String,
}

#[derive(Debug, Deserialize)]
pub struct ScoreBreakdown {
    #[serde(rename = "å…³é”®ä½çªç ´")]
    pub key_level_breakout: f64,
    #[serde(rename = "èµ„é‡‘æµå‘ç¡®è®¤")]
    pub fund_flow_confirm: f64,
    #[serde(rename = "ä½ç½®åˆç†")]
    pub position_reasonable: f64,
    #[serde(rename = "Kçº¿å½¢æ€é…åˆ")]
    pub kline_pattern: f64,
    #[serde(rename = "æŠ€æœ¯æŒ‡æ ‡é…åˆ")]
    pub technical_indicator: f64,
}

#[derive(Debug, Deserialize)]
pub struct StrategyAdjustments {
    pub volume_threshold: f64,
    pub stop_loss_buffer: f64,
    pub max_hold_time: String,
}
```

### 2. æŒä»“ç®¡ç†æ–°å­—æ®µ

```rust
#[derive(Debug, Deserialize)]
pub struct PositionManagementDecisionV2 {
    pub action: String,
    pub close_percentage: Option<f64>,
    pub reason: String,
    pub key_analysis: KeyAnalysis,
    pub optimal_exit_price: Option<f64>,
    pub remaining_target: Option<f64>,
    pub new_stop_loss: Option<f64>,
    pub confidence: String,
    pub valuescan_score: f64,
    pub score_breakdown: PositionScoreBreakdown,
    pub risk_warnings: Vec<String>,
    pub hold_conditions_check: HoldConditionsCheck,
    pub decision_priority: DecisionPriority,
}

#[derive(Debug, Deserialize)]
pub struct KeyAnalysis {
    pub resistance_distance: String,
    pub support_distance: String,
    pub reversal_signals: Vec<String>,
    pub profit_level: f64,
    pub peak_profit: Option<f64>,
    pub drawdown: Option<f64>,
    pub hold_duration: String,
}

#[derive(Debug, Deserialize)]
pub struct PositionScoreBreakdown {
    #[serde(rename = "å…³é”®ä½åˆ¤æ–­")]
    pub key_level_judgment: f64,
    #[serde(rename = "åè½¬ä¿¡å·ç¡®è®¤")]
    pub reversal_signal_confirm: f64,
    #[serde(rename = "ç›ˆåˆ©ä¿æŠ¤åˆç†")]
    pub profit_protection: f64,
    #[serde(rename = "é£é™©æ§åˆ¶åˆ°ä½")]
    pub risk_control: f64,
}

#[derive(Debug, Deserialize)]
pub struct HoldConditionsCheck {
    #[serde(rename = "è·ç¦»é˜»åŠ›>3%")]
    pub distance_to_resistance: bool,
    #[serde(rename = "æ— åè½¬Kçº¿")]
    pub no_reversal_kline: bool,
    #[serde(rename = "å¤šå‘¨æœŸå…±æŒ¯")]
    pub multi_period_resonance: bool,
    #[serde(rename = "æˆäº¤é‡å¥åº·")]
    pub healthy_volume: bool,
    #[serde(rename = "æ—¶é—´æˆæœ¬åˆç†")]
    pub reasonable_time_cost: bool,
}

#[derive(Debug, Deserialize)]
pub struct DecisionPriority {
    pub level: i32,
    pub reason: String,
}
```

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

1. **å…¼å®¹æ€§**: V2ç‰ˆæœ¬ä¸V1ç‰ˆæœ¬å¯ä»¥å…±å­˜,é€šè¿‡å‡½æ•°ååŒºåˆ†
2. **è¯„åˆ†ç³»ç»Ÿ**: æ–°å¢valuescan_scoreè¯„åˆ†,â‰¥6åˆ†æ‰å¼€ä»“
3. **å…³é”®ä½ä¼˜å…ˆ**: å¼€ä»“50%æƒé‡åœ¨å…³é”®ä½,æŒä»“60%æƒé‡åœ¨å…³é”®ä½
4. **ä»£ç å…œåº•**: æŒä»“>4hç›ˆåˆ©<1%è‡ªåŠ¨å¹³ä»“,äºæŸ>-5%è‡ªåŠ¨å¹³ä»“
5. **å†³ç­–é€æ˜**: score_breakdownè¯¦ç»†åˆ—å‡ºå„é¡¹è¯„åˆ†

---

**æ–¹æ³•è®ºæ¥æº**: Valuescan ç¤¾ç¾¤ 94,193 æ¡æ¶ˆæ¯,40.2 å¤©å®æˆ˜æ•°æ®
**é£é™©å£°æ˜**: ä»…ä¾›å­¦ä¹ ,ä¸æ„æˆæŠ•èµ„å»ºè®®
