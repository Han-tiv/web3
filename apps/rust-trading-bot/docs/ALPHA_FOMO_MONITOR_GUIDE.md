# 🚀 Alpha/FOMO 币种监控系统使用指南

## 📋 系统概述

这是一个专门为**日内交易**设计的实时监控系统，重点关注**Alpha机会**和**FOMO信号**，通过监控Telegram主力资金频道，获取技术数据，最终由**DeepSeek AI**做出交易决策。

---

## 🎯 核心功能

### 1. 实时监控
- 监控频道: Valuescan (ID: 2254462672)
- 监控目标: 主力资金异动
- 重点筛选: Alpha/FOMO币种

### 2. 智能筛选

#### Alpha 机会识别
**关键词**:
- `alpha`
- `新币`
- `上线`
- `首发`
- `binance` / `币安`

**特征**:
- 新上市币种
- 首发交易所
- 高潜力项目

#### FOMO 信号识别
**关键词**:
- `暴涨`
- `拉升`
- `突破`
- `异动`
- `急拉`
- `爆发`

**特征**:
- 24H涨幅 > 10%
- 快速拉升
- 突破关键位

### 3. 技术数据获取
- **数据源**: Binance / OKX / Bybit / Gate
- **K线周期**: 15分钟 (最近100根)
- **技术指标**:
  - RSI (14周期)
  - MACD (12, 26, 9)
  - 布林带 (20周期, 2倍标准差)
  - SMA (5, 20)
  - 资金费率 (合约)

### 4. AI决策
- **模型**: DeepSeek AI
- **决策类型**: BUY / HOLD / SKIP
- **风险评估**: HIGH / MEDIUM / LOW
- **仓位建议**: SMALL (1%) / MEDIUM (2%) / LARGE (3%)

---

## 🔧 安装与配置

### 1. 环境要求

```bash
# Rust 1.70+
rustc --version

# 依赖包
cargo build --release
```

### 2. 环境变量配置

创建 `.env` 文件：

```bash
# Telegram API (必需)
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=+86xxxxxxxxxxx

# DeepSeek API (必需)
DEEPSEEK_API_KEY=your_deepseek_api_key

# 可选：其他交易所API
BINANCE_API_KEY=your_binance_key
BINANCE_SECRET_KEY=your_binance_secret
```

### 3. 登录Telegram

首次使用需要登录：

```bash
cargo run --bin get_channels
# 输入验证码完成登录
```

---

## 🚀 使用方法

### 启动监控程序

```bash
cargo run --bin fund_monitor
```

### 预期输出

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚀 主力资金监控机器人 - Alpha/FOMO日内交易版
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎯 监控配置:
  频道 ID: 2254462672
  监控类型: Alpha机会 + FOMO信号
  交易策略: 日内波段
  持仓周期: 30分钟 - 4小时
  目标收益: 3-10%
  最大风险: 2%

🔄 连接到 Telegram...
✅ 已连接

📡 开始实时监控...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔥 发现FOMO机会: SOL 💰
   价格: $188.45 | 24H: +12.5% | 类型: 合约
🔍 正在获取 SOL 的技术数据...
⏳ 从交易所获取 SOL 数据...
💾 分析结果已保存: analysis_SOL_20251101_001530.json
🧠 发送给 DeepSeek AI 分析...

📝 DeepSeek Prompt:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
你是专业的日内交易分析师，现在有一个🔥 FOMO信号的交易机会...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 📊 DeepSeek AI 决策输出

### 输出格式（JSON）

```json
{
  "signal": "BUY",
  "confidence": "HIGH",
  "entry_price": 188.50,
  "stop_loss": 184.73,
  "take_profit_1": 194.16,
  "take_profit_2": 197.20,
  "position_size": "MEDIUM",
  "reason": "FOMO信号+突破关键位+RSI未超买+MACD金叉+资金持续流入",
  "risks": [
    "短期涨幅已达12.5%，回调风险",
    "FOMO情绪可能快速退潮",
    "需关注主力出逃信号"
  ],
  "time_horizon": "120",
  "priority": "HIGH"
}
```

### 字段说明

| 字段 | 说明 | 可选值 |
|------|------|--------|
| `signal` | 交易信号 | BUY / HOLD / SKIP |
| `confidence` | 信心等级 | HIGH / MEDIUM / LOW |
| `entry_price` | 建议入场价 | 具体价格 |
| `stop_loss` | 止损价 | 入场价 - 2% |
| `take_profit_1` | 第一目标 | 入场价 + 3% |
| `take_profit_2` | 第二目标 | 入场价 + 5% |
| `position_size` | 仓位大小 | SMALL(1%) / MEDIUM(2%) / LARGE(3%) |
| `reason` | 决策理由 | 100字以内说明 |
| `risks` | 风险点 | 数组，列举3个风险 |
| `time_horizon` | 预计持仓时间 | 分钟数 |
| `priority` | 优先级 | HIGH / MEDIUM / LOW |

---

## 🎯 交易策略

### 日内波段交易参数

| 参数 | 数值 | 说明 |
|------|------|------|
| **持仓周期** | 30分钟 - 4小时 | 日内完成 |
| **目标收益** | 3-10% | 快进快出 |
| **最大风险** | 2% | 严格止损 |
| **仓位控制** | 1-3% | 单币种占比 |
| **总仓位** | ≤30% | 留70%现金 |

### 入场条件

✅ **Alpha币种**:
1. 确认在主流交易所上市
2. 24H成交量 > 100万U
3. 价格稳定，无剧烈波动
4. 资金流入持续

✅ **FOMO币种**:
1. 突破关键技术位
2. 放量上涨（成交量>均量2倍）
3. 趋势延续（MACD金叉，RSI<70）
4. 未出现主力出逃信号

### 出场条件

❌ **止盈**:
- 达到 +3% → 减半仓
- 达到 +5% → 全部清仓
- 达到 +10% → 超额清仓（如有）

❌ **止损**:
- 跌破 -2% → 立即止损
- 主力出逃信号 → 立即清仓
- 时间止损: 4小时未突破 → 离场

### 风险控制

⚠️ **严格纪律**:
1. **不追高**: 涨幅>30%不入场
2. **不重仓**: 单币种≤3%
3. **不死扛**: 破位必止损
4. **不贪婪**: 达目标就走

---

## 📈 监控币种特征

### Alpha 币种特点

✅ **优势**:
- 早期进入，成本低
- 上涨空间大
- 关注度高

⚠️ **风险**:
- 流动性可能不足
- 价格波动剧烈
- 项目不确定性

🎯 **策略**:
- 小仓位试探（1%）
- 设置较宽止损（-3%）
- 分批建仓
- 快速止盈（+5%）

### FOMO 币种特点

✅ **优势**:
- 趋势明确
- 流动性好
- 短期爆发力强

⚠️ **风险**:
- 可能已大幅拉升
- 追高风险高
- 回调来得快

🎯 **策略**:
- 等待回调入场
- 中仓位（2%）
- 严格止损（-2%）
- 快速止盈（+3%）

---

## 🔍 实战案例

### 案例1: SOL Alpha机会

**信号**:
```
💰 【资金异动】$SOL
━━━━━━━━━
💼 资金流向: 24H内异动
💵 现价: $185.50
📈 24H: +5.2%
📊 类型: 合约
新币安alpha项目推荐
```

**AI分析**:
- 信号类型: Alpha + 资金流入
- RSI: 58 (健康)
- MACD: 金叉
- 布林带: 中轨区
- 资金费率: 0.01% (正常)

**决策**:
```json
{
  "signal": "BUY",
  "confidence": "HIGH",
  "entry_price": 185.50,
  "stop_loss": 181.79,
  "take_profit_1": 191.07,
  "take_profit_2": 194.78,
  "position_size": "MEDIUM",
  "reason": "Alpha机会+资金流入+技术健康+未超买",
  "time_horizon": "180",
  "priority": "HIGH"
}
```

**结果**:
- 入场: $185.50
- 第一目标达成: $191.07 (+3%) ✅
- 减半仓，剩余持有
- 第二目标达成: $194.78 (+5%) ✅
- 全部清仓，净利润: +4%

---

### 案例2: DOGE FOMO信号（失败案例）

**信号**:
```
💰 【资金异动】$DOGE
━━━━━━━━━
💼 资金流向: 急拉
💵 现价: $0.1850
📈 24H: +28.5%
📊 类型: 合约
```

**AI分析**:
- 信号类型: FOMO
- RSI: 78 (超买)
- MACD: 死叉预警
- 布林带: 上轨区
- 已大幅拉升

**决策**:
```json
{
  "signal": "SKIP",
  "confidence": "LOW",
  "reason": "已涨28.5%，RSI超买，追高风险极高",
  "risks": [
    "超买严重，回调风险大",
    "FOMO情绪见顶",
    "短期获利盘巨大"
  ],
  "priority": "LOW"
}
```

**结果**:
- 未入场 ✅
- 30分钟后: 快速回调-15% 
- **避免损失!**

---

## 🛠️ 故障排除

### 问题1: 连接Telegram失败

**错误**: `未登录，请先运行登录程序`

**解决**:
```bash
# 重新登录
cargo run --bin get_channels
# 输入验证码
```

### 问题2: 无法获取技术数据

**错误**: `无法从任何交易所获取 XXX 的数据`

**原因**:
- 币种未在主流交易所上市
- 交易所API限流
- 网络问题

**解决**:
- 检查币种是否在Binance/OKX上市
- 等待几分钟后重试
- 检查网络连接

### 问题3: DeepSeek API调用失败

**错误**: `DeepSeek API error`

**解决**:
```bash
# 检查API key
echo $DEEPSEEK_API_KEY

# 测试API连接
curl -H "Authorization: Bearer $DEEPSEEK_API_KEY" \
  https://api.deepseek.com/v1/models
```

---

## 📊 性能优化

### 1. 减少API调用

```rust
// 使用缓存避免频繁查询同一币种
let cache_duration = Duration::from_secs(60); // 1分钟缓存
```

### 2. 并发处理

```rust
// 同时处理多个币种
tokio::spawn(async move {
    analyze_coin(alert).await
});
```

### 3. 错误重试

```rust
// API调用失败时自动重试
for attempt in 1..=3 {
    match fetch_data().await {
        Ok(data) => return Ok(data),
        Err(e) if attempt < 3 => {
            tokio::time::sleep(Duration::from_secs(5)).await;
            continue;
        }
        Err(e) => return Err(e),
    }
}
```

---

## 📝 日志与记录

### 分析结果文件

每次分析会生成JSON文件：

```
analysis_SOL_20251101_001530.json
analysis_BNB_20251101_002145.json
analysis_XRP_20251101_003256.json
```

### 文件内容

```json
{
  "coin": "SOL",
  "alert": {
    "coin": "SOL",
    "alert_type": "FomoSignal",
    "price": 188.45,
    "change_24h": 12.5,
    "fund_type": "合约",
    "timestamp": "2025-11-01T00:15:30Z",
    "raw_message": "..."
  },
  "technical_data": {
    "current_price": 188.50,
    "volume_24h": 5500000000,
    "rsi_15m": 68.5,
    "macd": 2.35,
    ...
  },
  "recommendation": ""
}
```

---

## 🎓 学习建议

### 新手阶段 (第1-2周)

1. **只观察不交易**
   - 运行程序，观察AI决策
   - 记录信号和结果
   - 总结成功/失败案例

2. **模拟交易**
   - 用Excel记录虚拟交易
   - 严格执行止盈止损
   - 计算收益率

### 进阶阶段 (第3-4周)

1. **小资金实盘**
   - 每笔交易≤1%仓位
   - 严格按AI建议执行
   - 每天复盘

2. **数据分析**
   - 统计信号成功率
   - 分析失败原因
   - 优化筛选条件

### 成熟阶段 (第5周+)

1. **标准化流程**
   - 形成自己的交易checklist
   - 建立风控体系
   - 稳定盈利

2. **持续优化**
   - 调整仓位策略
   - 优化止盈止损点位
   - 扩大适用币种

---

## ⚠️ 风险提示

### 高风险特征

❌ **避免以下情况**:
1. 已涨幅 >30% 的币种
2. 24H成交量 <100万U
3. RSI >80 (严重超买)
4. 频繁出现"主力出逃"
5. 无法获取技术数据
6. 项目基本面存疑

### 资金管理

💰 **严格规则**:
- 单笔风险 ≤2%
- 单币种 ≤3%
- 总仓位 ≤30%
- 保留70%现金应对波动

### 心理建设

🧠 **交易纪律**:
1. **不追涨**: 错过就错过
2. **不抄底**: 等确认信号
3. **不加仓**: 死多单不加仓
4. **不盲从**: AI建议也要验证

---

## 📞 技术支持

### 问题反馈

如遇到问题，请提供以下信息：
1. 错误日志
2. 运行环境（OS、Rust版本）
3. 配置文件（隐藏敏感信息）
4. 复现步骤

### 功能建议

欢迎提出改进建议：
- 新增交易所支持
- 新增技术指标
- UI改进
- 性能优化

---

## 📚 相关文档

1. **主力关键位策略**: `/docs/deepseek/主力关键位策略_PROMPT.md`
2. **频道分析报告**: `/Valuescan主力资金监控频道_分析报告.md`
3. **DeepSeek Prompt优化**: `/docs/DEEPSEEK_PROMPT_UPDATE.md`

---

*文档版本: v1.0*  
*更新日期: 2025-11-01*  
*适用系统: Alpha/FOMO 币种监控系统*
