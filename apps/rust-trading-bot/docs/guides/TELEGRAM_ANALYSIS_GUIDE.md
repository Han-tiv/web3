# ğŸ“Š Telegram é¢‘é“åˆ†æå·¥å…·ä½¿ç”¨æŒ‡å—

## ğŸ¯ é¢‘é“è§’è‰²å®šä¹‰

æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œé¢‘é“è§’è‰²å®šä¹‰å¦‚ä¸‹ï¼š

| é¢‘é“åç§° | é¢‘é“ID | è§’è‰² | è¯´æ˜ |
|---------|--------|------|------|
| **valuescan** | `2254462672` | â­ **ä¸»é¢‘é“** | ä¸»è¦ä¿¡å·æ¥æºï¼Œæ ¸å¿ƒäº¤æ˜“ä¿¡å· |
| **CM AI SIGNAL** | `2291145819` | ğŸ”§ **è¾…åŠ©é¢‘é“** | è¾…åŠ©å‚è€ƒä¿¡å·ï¼Œè¡¥å……ä¿¡æ¯ |

---

## ğŸ› ï¸ å·¥å…·è¯´æ˜

### 1ï¸âƒ£ æŸ¥çœ‹é¢‘é“åˆ—è¡¨ - `list_channels`

æ˜¾ç¤ºæ‰€æœ‰åŠ å…¥çš„é¢‘é“ï¼Œå¹¶æ ‡è®°è§’è‰²ã€‚

```bash
cargo run --bin list_channels
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ğŸ“‹ é¢‘é“åˆ—è¡¨:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  1. valuescan (ID: 2254462672)
     è§’è‰²: â­ [ä¸»é¢‘é“ - valuescan]

  2. CM AI SIGNAL (ID: 2291145819)
     è§’è‰²: ğŸ”§ [è¾…åŠ©é¢‘é“ - CM AI SIGNAL]
```

---

### 2ï¸âƒ£ å¤šé¢‘é“åˆ†æå·¥å…· - `multi_channel_analyzer`

åˆ†æå¤šä¸ªé¢‘é“çš„æ¶ˆæ¯ï¼ŒæŒ‰ç”¨æˆ·ç»Ÿè®¡æ´»è·ƒåº¦ã€‚

```bash
# ç¼–è¯‘
cargo build --release --bin multi_channel_analyzer

# è¿è¡Œ
cargo run --bin multi_channel_analyzer
```

**åŠŸèƒ½**ï¼š
- âœ… åˆ†æä¸»é¢‘é“å’Œè¾…åŠ©é¢‘é“
- âœ… ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„æ¶ˆæ¯æ•°é‡
- âœ… æ˜¾ç¤ºç”¨æˆ·æ´»è·ƒåº¦æ’å
- âœ… å±•ç¤ºæ¯ä¸ªç”¨æˆ·çš„æœ€è¿‘æ¶ˆæ¯

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š åˆ†æé¢‘é“: valuescan (ä¸»é¢‘é“)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š é¢‘é“ç»Ÿè®¡:
  æ€»æ¶ˆæ¯æ•°: 87 æ¡
  æ´»è·ƒç”¨æˆ·: 12 äºº

ğŸ‘¥ ç”¨æˆ·æ´»è·ƒåº¦æ’å:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. John Trader (@john123) - 25 æ¡æ¶ˆæ¯
2. Crypto Expert (@expert99) - 18 æ¡æ¶ˆæ¯
3. Signal Bot (@bot_signal) - 15 æ¡æ¶ˆæ¯
```

---

### 3ï¸âƒ£ ç”¨æˆ·æ¶ˆæ¯æ€»ç»“å·¥å…· - `user_message_summary` â­

**æœ€å¼ºå¤§çš„åˆ†æå·¥å…·**ï¼Œå®ç°ç¾¤ç»„/é¢‘é“ç”¨æˆ·æ¶ˆæ¯çš„æ·±åº¦åˆ†æã€‚

```bash
# ç¼–è¯‘
cargo build --release --bin user_message_summary

# è¿è¡Œ
cargo run --bin user_message_summary
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š

#### ğŸ“Œ æŒ‰ç”¨æˆ·èšåˆæ¶ˆæ¯
- è‡ªåŠ¨èšåˆåŒä¸€ç”¨æˆ·åœ¨ä¸åŒé¢‘é“çš„æ‰€æœ‰æ¶ˆæ¯
- ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„æ€»æ¶ˆæ¯æ•°ã€æ´»è·ƒé¢‘é“
- å»ºç«‹å®Œæ•´çš„ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿

#### ğŸ” æ™ºèƒ½å…³é”®è¯æå–
è‡ªåŠ¨è¯†åˆ«æ¶ˆæ¯ä¸­çš„å…³é”®ä¿¡æ¯ï¼š
- å¸ç§: BTC, ETH, USDT ç­‰
- äº¤æ˜“ä¿¡å·: åšå¤šã€åšç©ºã€æ­¢æŸã€æ­¢ç›ˆ
- å…¶ä»–åŠ å¯†è´§å¸æœ¯è¯­

#### ğŸ“Š æ´»è·ƒåº¦è¯„åˆ†
ç»¼åˆè€ƒè™‘å¤šä¸ªç»´åº¦ï¼š
- æ¶ˆæ¯æ•°é‡ï¼ˆæƒé‡ 1.0ï¼‰
- é¢‘é“å¤šæ ·æ€§ï¼ˆæƒé‡ 5.0ï¼‰
- äº’åŠ¨å›å¤ï¼ˆæƒé‡ 2.0ï¼‰

#### ğŸ“ˆ ç”Ÿæˆåˆ†ææŠ¥å‘Š
è‡ªåŠ¨ç”Ÿæˆ JSON æ ¼å¼çš„è¯¦ç»†æŠ¥å‘Šï¼š
```json
{
  "generated_at": "2025-10-31T21:50:00Z",
  "channels": [...],
  "user_summaries": [
    {
      "user_id": 123456,
      "username": "trader_pro",
      "total_messages": 45,
      "keywords": ["BTC", "ETH", "åšå¤šä¿¡å·"],
      "activity_score": 67.5,
      "message_timeline": [...]
    }
  ],
  "statistics": {
    "total_messages": 156,
    "total_users": 23,
    "avg_messages_per_user": 6.8
  }
}
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š åˆ†ææŠ¥å‘Šæ‘˜è¦
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ˆ æ€»ä½“ç»Ÿè®¡:
  æ¶ˆæ¯æ€»æ•°: 287
  ç”¨æˆ·æ€»æ•°: 35
  å¹³å‡æ¶ˆæ¯æ•°: 8.2
  æœ€æ´»è·ƒç”¨æˆ·: John Trader

ğŸ‘¥ Top 10 æ´»è·ƒç”¨æˆ·:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. John Trader (@john123) - 43 æ¡æ¶ˆæ¯ | æ´»è·ƒåº¦: 85.6
   å…³é”®è¯: BTC, ETH, åšå¤šä¿¡å·, æ­¢æŸ
   æ´»è·ƒé¢‘é“: valuescan, CM AI SIGNAL

2. Crypto Expert (@expert99) - 32 æ¡æ¶ˆæ¯ | æ´»è·ƒåº¦: 72.3
   å…³é”®è¯: USDT, åšç©ºä¿¡å·, æ­¢ç›ˆ
   æ´»è·ƒé¢‘é“: valuescan

ğŸ’¡ è¯¦ç»†æŠ¥å‘Šå·²ä¿å­˜åˆ° channel_analysis_report.json
```

---

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹

### æ­¥éª¤ 1: æŸ¥çœ‹é¢‘é“åˆ—è¡¨
```bash
cargo run --bin list_channels
```
ç¡®è®¤é¢‘é“ ID å’Œè§’è‰²æ ‡è®°æ­£ç¡®ã€‚

### æ­¥éª¤ 2: è¿è¡Œç”¨æˆ·æ¶ˆæ¯æ€»ç»“
```bash
cargo run --bin user_message_summary
```
è¿™ä¼šï¼š
1. ä»ä¸¤ä¸ªé¢‘é“æ”¶é›†æœ€è¿‘ 200 æ¡æ¶ˆæ¯
2. æŒ‰ç”¨æˆ·èšåˆæ‰€æœ‰æ¶ˆæ¯
3. æå–å…³é”®è¯å’Œè®¡ç®—æ´»è·ƒåº¦
4. ç”Ÿæˆè¯¦ç»†çš„ JSON æŠ¥å‘Š

### æ­¥éª¤ 3: æŸ¥çœ‹æŠ¥å‘Š
```bash
# æŸ¥çœ‹ JSON æŠ¥å‘Š
cat channel_analysis_report.json | jq '.'

# æˆ–ä½¿ç”¨ä»»æ„ JSON æŸ¥çœ‹å™¨
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (`.env`)
```bash
# Telegram API é…ç½®
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=+1234567890
```

### è‡ªå®šä¹‰é¢‘é“é…ç½®

å¦‚éœ€ä¿®æ”¹é¢‘é“è®¾ç½®ï¼Œç¼–è¾‘å·¥å…·æºç ä¸­çš„é¢‘é“é…ç½®ï¼š

**åœ¨ `user_message_summary.rs` ä¸­**ï¼š
```rust
let channels = vec![
    ChannelConfig {
        id: 2254462672,
        name: "valuescan".to_string(),
        role: "primary".to_string(),  // ä¸»é¢‘é“
    },
    ChannelConfig {
        id: 2291145819,
        name: "CM AI SIGNAL".to_string(),
        role: "auxiliary".to_string(),  // è¾…åŠ©é¢‘é“
    },
];
```

---

## ğŸ“Š åˆ†æç»´åº¦è¯´æ˜

### ç”¨æˆ·æ´»è·ƒåº¦è¯„åˆ†ç®—æ³•

```
æ´»è·ƒåº¦åˆ†æ•° = (æ¶ˆæ¯æ•° Ã— 1.0) + (æ´»è·ƒé¢‘é“æ•° Ã— 5.0) + (å›å¤æ•° Ã— 2.0)
```

**ç¤ºä¾‹è®¡ç®—**ï¼š
- ç”¨æˆ· Aï¼š30æ¡æ¶ˆæ¯ + 2ä¸ªé¢‘é“ + 5ä¸ªå›å¤
  - åˆ†æ•° = 30Ã—1 + 2Ã—5 + 5Ã—2 = 50 åˆ†

- ç”¨æˆ· Bï¼š50æ¡æ¶ˆæ¯ + 1ä¸ªé¢‘é“ + 0ä¸ªå›å¤  
  - åˆ†æ•° = 50Ã—1 + 1Ã—5 + 0Ã—2 = 55 åˆ†

**è§£è¯»**ï¼š
- é«˜åˆ†ç”¨æˆ· = æ¶ˆæ¯å¤š + è·¨é¢‘é“æ´»è·ƒ + äº’åŠ¨æ€§å¼º
- è¿™äº›ç”¨æˆ·é€šå¸¸æ˜¯æ ¸å¿ƒæ„è§é¢†è¢–æˆ–ä¿¡å·æä¾›è€…

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: è¯†åˆ«æ ¸å¿ƒä¿¡å·æä¾›è€…
è¿è¡Œ `user_message_summary` æŸ¥çœ‹æ´»è·ƒåº¦ Top 10ï¼Œå…³æ³¨ï¼š
- æ´»è·ƒåº¦ > 60 çš„ç”¨æˆ·
- å…³é”®è¯åŒ…å«"åšå¤šä¿¡å·"ã€"åšç©ºä¿¡å·"çš„ç”¨æˆ·
- åœ¨ä¸»é¢‘é“ valuescan æ´»è·ƒçš„ç”¨æˆ·

### åœºæ™¯ 2: åˆ†æä¿¡å·è´¨é‡
é€šè¿‡ JSON æŠ¥å‘Šçš„ `message_timeline` æŸ¥çœ‹ï¼š
- ç”¨æˆ·å‘é€ä¿¡å·çš„é¢‘ç‡
- ä¿¡å·åæ˜¯å¦æœ‰æ­¢æŸ/æ­¢ç›ˆè·Ÿè¿›
- è·¨é¢‘é“ä¿¡å·çš„ä¸€è‡´æ€§

### åœºæ™¯ 3: æ„å»ºäº¤æ˜“ç­–ç•¥
åŸºäºç”¨æˆ·åˆ†æç»“æœï¼š
1. ç­›é€‰é«˜è´¨é‡ä¿¡å·æä¾›è€…ï¼ˆæ´»è·ƒåº¦ > 70ï¼‰
2. ç›‘æ§ä¸»é¢‘é“ valuescan çš„è¿™äº›ç”¨æˆ·æ¶ˆæ¯
3. è¾…åŠ©é¢‘é“ CM AI SIGNAL ä½œä¸ºéªŒè¯å‚è€ƒ
4. è‡ªåŠ¨åŒ–äº¤æ˜“ä¿¡å·æå–å’Œæ‰§è¡Œ

---

## ğŸš€ è¿›é˜¶åŠŸèƒ½

### å®æ—¶ç›‘æ§ç‰¹å®šç”¨æˆ·
ä¿®æ”¹ `monitor_channel.rs` æ·»åŠ ç”¨æˆ·è¿‡æ»¤ï¼š
```rust
if let Some(sender) = message.sender() {
    let user_id = sender.id();
    let target_users = vec![123456, 789012]; // å…³æ³¨çš„ç”¨æˆ·ID
    
    if target_users.contains(&user_id) {
        println!("ğŸ¯ å…³æ³¨ç”¨æˆ·å‘è¨€: {}", message.text());
        // è§¦å‘äº¤æ˜“é€»è¾‘
    }
}
```

### å¯¼å‡ºç”¨æˆ·æ¶ˆæ¯ä¸º CSV
æ·»åŠ  CSV å¯¼å‡ºåŠŸèƒ½ï¼š
```rust
use csv::Writer;

let mut wtr = Writer::from_path("user_messages.csv")?;
wtr.write_record(&["User", "Channel", "Message", "Timestamp"])?;

for user in report.user_summaries {
    for msg in user.message_timeline {
        wtr.write_record(&[
            &user.display_name,
            &msg.channel,
            &msg.content,
            &msg.timestamp,
        ])?;
    }
}
```

---

## ğŸ“ æŠ¥å‘Šå­—æ®µè¯´æ˜

### UserSummary å­—æ®µ
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|-----|------|------|
| `user_id` | i64 | Telegram ç”¨æˆ· ID |
| `username` | String | ç”¨æˆ·åï¼ˆ@usernameï¼‰|
| `display_name` | String | æ˜¾ç¤ºåç§° |
| `total_messages` | usize | æ€»æ¶ˆæ¯æ•° |
| `channels` | HashMap | æ´»è·ƒé¢‘é“ç»Ÿè®¡ |
| `message_timeline` | Vec | æ¶ˆæ¯æ—¶é—´çº¿ |
| `keywords` | Vec<String> | æå–çš„å…³é”®è¯ |
| `activity_score` | f64 | æ´»è·ƒåº¦è¯„åˆ† |

### MessageRecord å­—æ®µ
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|-----|------|------|
| `timestamp` | String | æ¶ˆæ¯æ—¶é—´ |
| `channel` | String | æ‰€åœ¨é¢‘é“ |
| `content` | String | æ¶ˆæ¯å†…å®¹ |
| `is_reply` | bool | æ˜¯å¦ä¸ºå›å¤æ¶ˆæ¯ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éšç§ä¿æŠ¤**ï¼šç”Ÿæˆçš„æŠ¥å‘ŠåŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡
2. **API é™åˆ¶**ï¼šTelegram API æœ‰è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼Œå¤§é‡æ¶ˆæ¯å¯èƒ½éœ€è¦æ—¶é—´
3. **æ¶ˆæ¯æ•°é‡**ï¼šé»˜è®¤åˆ†ææœ€è¿‘ 200 æ¡æ¶ˆæ¯ï¼Œå¯åœ¨ä»£ç ä¸­è°ƒæ•´
4. **å…³é”®è¯æå–**ï¼šå½“å‰ä½¿ç”¨ç®€å•è§„åˆ™ï¼Œå¯æ ¹æ®éœ€è¦ä¼˜åŒ–ç®—æ³•

---

## ğŸ¯ æ€»ç»“

- **valuescan** = ä¸»é¢‘é“ â­ æ ¸å¿ƒäº¤æ˜“ä¿¡å·
- **CM AI SIGNAL** = è¾…åŠ©é¢‘é“ ğŸ”§ å‚è€ƒéªŒè¯
- **user_message_summary** = æœ€å¼ºå·¥å…· ğŸ“Š æ·±åº¦ç”¨æˆ·åˆ†æ

å»ºè®®å·¥ä½œæµï¼š
1. æ¯æ—¥è¿è¡Œ `user_message_summary` æ›´æ–°ç”¨æˆ·æ´»è·ƒåº¦
2. å…³æ³¨ Top 5 é«˜æ´»è·ƒç”¨æˆ·
3. å®æ—¶ç›‘æ§è¿™äº›ç”¨æˆ·åœ¨ä¸»é¢‘é“çš„æ¶ˆæ¯
4. ç»“åˆè¾…åŠ©é¢‘é“éªŒè¯ä¿¡å·å¯é æ€§
5. è‡ªåŠ¨åŒ–äº¤æ˜“æ‰§è¡Œ

---

**ç¥äº¤æ˜“é¡ºåˆ©ï¼** ğŸ“ˆğŸš€
